from flask import Flask, render_template, request, redirect, url_for
import sqlite3
import os

app = Flask(__name__)
app.secret_key = 'health_class_secret_key'
DB_FILE = 'health_class.db'

# ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” í•¨ìˆ˜
def init_db():
    if not os.path.exists(DB_FILE):
        conn = sqlite3.connect(DB_FILE)
        cursor = conn.cursor()
        # ì‚¬ìš©ì í…Œì´ë¸”
        cursor.execute('''
            CREATE TABLE users (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                username TEXT NOT NULL,
                password TEXT NOT NULL,
                student_id TEXT NOT NULL
            )
        ''')
        # ê²Œì‹œê¸€ í…Œì´ë¸” (type: notice ë˜ëŠ” qna)
        cursor.execute('''
            CREATE TABLE posts (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                type TEXT NOT NULL,
                title TEXT NOT NULL,
                content TEXT NOT NULL,
                author TEXT NOT NULL
            )
        ''')
        # ìƒ˜í”Œ ë°ì´í„° ì¶”ê°€
        cursor.execute("INSERT INTO posts (type, title, content, author) VALUES ('notice', 'ë³´ê±´ì‹¤ ì´ìš© ìˆ˜ì¹™', 'ì•„í”ˆ ì¹œêµ¬ë“¤ì€ ì–¸ì œë“  ì˜¤ì„¸ìš”!', 'ë³´ê±´ì„ ìƒë‹˜')")
        cursor.execute("INSERT INTO posts (type, title, content, author) VALUES ('qna', 'ê°ê¸°ì— ê±¸ë ¸ì–´ìš”', 'ë”°ëœ»í•œ ë¬¼ì„ ë§ì´ ë§ˆì‹œì„¸ìš”.', 'ê¹€ì² ìˆ˜')")
        conn.commit()
        conn.close()
        print("ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.")

# ë©”ì¸ í˜ì´ì§€
@app.route('/')
def index():
    return render_template('index.html')

# íšŒì›ê°€ì…
@app.route('/signup', methods=['GET', 'POST'])
def signup():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form['password']
        student_id = request.form['student_id'] # ì˜ˆ: 5í•™ë…„ 1ë°˜ 3ë²ˆ
        
        conn = sqlite3.connect(DB_FILE)
        cursor = conn.cursor()
        cursor.execute("INSERT INTO users (username, password, student_id) VALUES (?, ?, ?)", 
                       (username, password, student_id))
        conn.commit()
        conn.close()
        return redirect(url_for('index'))
    return render_template('signup.html')

# ê²Œì‹œíŒ (ê³µì§€ì‚¬í•­ ë° ì§ˆì˜ì‘ë‹µ)
@app.route('/board/<board_type>')
def board(board_type):
    board_name = "ê³µì§€ì‚¬í•­" if board_type == 'notice' else "ì§ˆì˜ì‘ë‹µ"
    
    conn = sqlite3.connect(DB_FILE)
    cursor = conn.cursor()
    cursor.execute("SELECT title, author, content FROM posts WHERE type = ?", (board_type,))
    posts = cursor.fetchall()
    conn.close()
    
    return render_template('board.html', board_name=board_name, posts=posts, board_type=board_type)

if __name__ == '__main__':
    init_db() # ì•± ì‹¤í–‰ ì‹œ DB í™•ì¸
    app.run(debug=True)
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5í•™ë…„ ë³´ê±´ìˆ˜ì—…</title>
    <!-- Bootstrap CSS (ë””ìì¸ í”„ë ˆì„ì›Œí¬) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f8ff; font-family: 'Jua', sans-serif; }
        .navbar { background-color: #ff9f43; }
        .navbar-brand, .nav-link { color: white !important; font-weight: bold; }
        .container { background-color: white; border-radius: 15px; padding: 30px; margin-top: 30px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1, h2 { color: #ff9f43; }
    </style>
    <!-- êµ¬ê¸€ í°íŠ¸ (ê·€ì—¬ìš´ ëŠë‚Œ) -->
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">ğŸ¥ 5í•™ë…„ ë³´ê±´êµì‹¤</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('board', board_type='notice') }}">ğŸ“¢ ê³µì§€ì‚¬í•­</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('board', board_type='qna') }}">â“ ì§ˆì˜ì‘ë‹µ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('signup') }}">ğŸ“ íšŒì›ê°€ì…</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        {% block content %}{% endblock %}
    </div>

    <footer class="text-center mt-5 mb-3 text-muted">
        <small>Â© 2024 5í•™ë…„ ë³´ê±´ìˆ˜ì—…. ê±´ê°•í•˜ê³  ì”©ì”©í•˜ê²Œ!</small>
    </footer>
</body>
</html>
{% extends 'base.html' %}

{% block content %}
<div class="text-center">
    <h1 class="display-4 mb-4">í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹</h1>
    <p class="lead">ìš°ë¦¬ë“¤ì˜ ê±´ê°•ì„ ì§€í‚¤ëŠ” 5í•™ë…„ ë³´ê±´ìˆ˜ì—… í™ˆí˜ì´ì§€ì…ë‹ˆë‹¤.</p>
    <hr class="my-4">
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-3 border-warning">
                <div class="card-body">
                    <h5 class="card-title">ğŸ“¢ ì˜¤ëŠ˜ì˜ ê±´ê°• ì†Œì‹</h5>
                    <p class="card-text">ì† ì”»ê¸°ëŠ” ê°€ì¥ ì‰¬ìš´ ì§ˆë³‘ ì˜ˆë°© ë°©ë²•ì…ë‹ˆë‹¤.</p>
                    <a href="{{ url_for('board', board_type='notice') }}" class="btn btn-warning text-white">ê³µì§€ì‚¬í•­ ë³´ê¸°</a>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-3 border-info">
                <div class="card-body">
                    <h5 class="card-title">â“ ê¶ê¸ˆí•œ ì ì´ ìˆë‚˜ìš”?</h5>
                    <p class="card-text">ë³´ê±´ ì„ ìƒë‹˜ê»˜ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”.</p>
                    <a href="{{ url_for('board', board_type='qna') }}" class="btn btn-info text-white">ì§ˆë¬¸í•˜ëŸ¬ ê°€ê¸°</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% extends 'base.html' %}

{% block content %}
<h2 class="mb-4">{{ board_name }}</h2>

<table class="table table-hover">
    <thead class="table-light">
        <tr>
            <th scope="col">ì œëª©</th>
            <th scope="col">ì‘ì„±ì</th>
            <th scope="col">ë‚´ìš© (ë¯¸ë¦¬ë³´ê¸°)</th>
        </tr>
    </thead>
    <tbody>
        {% for post in posts %}
        <tr>
            <td>{{ post[0] }}</td>
            <td>{{ post[1] }}</td>
            <td>{{ post[2] }}</td>
        </tr>
        {% else %}
        <tr>
            <td colspan="3" class="text-center">ì•„ì§ ë“±ë¡ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="text-end">
    <button class="btn btn-secondary" disabled>ê¸€ì“°ê¸° (ë¡œê·¸ì¸ í•„ìš”)</button>
</div>
{% endblock %}
/health_class
    â”œâ”€â”€ app.py                # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ (ë°±ì—”ë“œ)
    â””â”€â”€ templates             # HTML íŒŒì¼ í´ë”
        â”œâ”€â”€ base.html         # ê¸°ë³¸ ë ˆì´ì•„ì›ƒ
        â”œâ”€â”€ index.html        # ë©”ì¸ í™”ë©´
        â”œâ”€â”€ signup.html       # íšŒì›ê°€ì…
        â””â”€â”€ board.html        # ê²Œì‹œíŒ (ê³µì§€ì‚¬í•­/ì§ˆì˜ì‘ë‹µ ê³µìš©)
